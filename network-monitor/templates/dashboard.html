<!DOCTYPE html>
<html>
<head>
  <title>Network Monitor Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist-min"></script>
</head>
<body class="p-4 bg-dark text-white">
  <h1>Network Monitor</h1>
  <table class="table table-dark table-striped mt-4" id="devTable">
    <thead>
      <tr><th>Name</th><th>IP</th><th>Status</th><th>Latency (ms)</th><th>Last Checked</th></tr>
    </thead>
    <tbody>
      {% for d in devices %}
        <tr>
          <td>{{ d.name }}</td>
          <td>{{ d.ip }}</td>
          <td>{{ d.status }}</td>
          <td>{{ d.latency or '—' }}</td>
          <td>{{ d.time }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <script>
    setInterval(() => {
      fetch('/data')
        .then(r => r.json())
        .then(data => {
          const tbody = document.querySelector('#devTable tbody');
          tbody.innerHTML = data.map(d => `
            <tr>
              <td>${d.name}</td>
              <td>${d.ip}</td>
              <td>${d.status}</td>
              <td>${d.latency ?? '—'}</td>
              <td>${d.time}</td>
            </tr>`).join('');
        });
    }, 5000);
  </script>
</body>
</html>